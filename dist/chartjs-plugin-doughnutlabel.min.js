/**
   * @scottalan/chartjs-plugin-doughnutlabel v3.0.2
   * @license
   * author: 
   * chartjs-plugin-doughnutlabel.js v3.0.2
   * Released under the ISC license.
   */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js"),require("chart.js/helpers")):"function"==typeof define&&define.amd?define(["chart.js","chart.js/helpers"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["chartjs-plugin-doughnutlabel"]=e(t.Chart,t.Chart.helpers)}(this,(function(t,e){"use strict";const n={parseText:(t,e)=>"function"==typeof t?t(e):t,parseFont:o=>{const l=t.Chart.defaults,r=e.valueOrDefault(o.size,l.font.size),i={family:e.valueOrDefault(o.family,l.font.family),lineHeight:e.toLineHeight(o.lineHeight,r),size:r,style:e.valueOrDefault(o.style,l.font.style),weight:e.valueOrDefault(o.weight,null),string:""};return i.string=n.toFontString(i),i},toFontString:t=>!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?"":(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family,textSize:(t,e)=>{const{ctx:n}=t,o=n.font;let l=0,r=0;e.forEach((e=>{const o="function"==typeof e.text?e.text(t):e.text;n.font=e.font?e.font.string:"",l=Math.max(n.measureText(o).width,l),r+=e.font.lineHeight})),n.font=o;return{height:r,width:l}}};var o={id:"doughnutLabel",defaults:{font:{family:"sans-serif",size:16,style:"normal",weight:"normal",lineHeight:1.2,string:"16px sans-serif"}},beforeDraw:(o,l,r)=>((o,l)=>{if(o.chartArea&&l){const{labels:r}=l;if(!r?.length)return;const{ctx:i,chartArea:{top:s,right:f,bottom:a,left:h}}=o,u=[];r.forEach((r=>{const s={text:n.parseText(r.text,o),font:n.parseFont(e.resolve([r.font,l.font,t.Chart.defaults.font],i,0)||t.Chart.defaults.font),color:e.resolve([r.color,l.color,t.Chart.defaults.color],i,0)??"#000"};u.push(s)}));let c=n.textSize(o,u);const g=Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2)),d=2*t.DoughnutController.prototype.innerRadius/g;d<1&&(u.forEach((o=>{o.font.size=Math.floor(o.font.size*d),o.font.lineHeight=1.2,o.font=n.parseFont(e.resolve([o.font,null],i,0)||t.Chart.defaults.font)})),c=n.textSize(o,u)),i.textAlign="center",i.textBaseline="middle";const p=(h+f)/2,x=(s+a)/2-c.height/2;let y;const m=u.length;let w=0;for(y=0;y<m;++y){i.fillStyle=u[y].color,i.font=u[y].font.string;const t=x+u[y].font.lineHeight/2+w;w+=u[y].font.lineHeight;const e=n.parseText(u[y].text,o);i.fillText(e,p,t)}}})(o,r)};return t.Chart.register(o,...t.registerables),o}));
